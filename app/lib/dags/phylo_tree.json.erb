{
  "output_dir_s3": "<%= @attribute_dict[:phylo_tree_output_s3_path] %>",
  "targets": {
    "taxon_fasta_in": [
      <% @attribute_dict[:taxon_fasta_files].each do |tff| %>
        "<%= tff %>"
        <%= (tff == @attribute_dict[:taxon_fasta_files].last) ? '' : ',' %>
      <% end %>
    ],
    "phylo_tree_out": ["phylo_tree.newick"]
  },
  "steps": [
    {
      "in": ["taxon_fasta_in"],
      "out": "phylo_tree_out",
      "class": "PipelineStepGeneratePhyloTree",
      "module": "idseq_dag.steps.generate_phylo_tree",
      "additional_files": {
        "nt_loc_db": "<%= @attribute_dict[:nt_loc_db] %>",

        <% @attribute_dict[:align_viz_files].each do |avf| %>
          "<%= avf[:name] %>": "<%= avf[:s3_file] %>"
          <%= (avf == @attribute_dict[:align_viz_files].last) ? '' : ',' %>
        <% end %>
      },
      "additional_attributes": {
        "taxid": <%= @attribute_dict[:taxid] %>,
        "nt_db": "<%= @attribute_dict[:nt_db] %>"
      }
    }
  ],
  "given_targets": {
    "taxon_fasta_in": {
      "s3_dir": "<%= @attribute_dict[:phylo_tree_output_s3_path] %>"
    }
  }
}
